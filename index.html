<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>My Midjourney AI Art</title>
  <meta property="og:image" content="https://mj-gallery.com/9c8420b0-4a42-45c9-8d87-414a89f7b304/grid_0_384_N.webp"/>
  <meta property="og:description" content="Gallery of art generated through Midjourney using AI" />
  <style>
    html {
      /*background-image: url(https://grainy-gradients.vercel.app/noise.svg);*/
      background-color: rgb(17, 20, 32);
    }
    body {
      overflow-x: hidden;
      margin: 0;
    }
    .box {
      position: absolute;
      box-sizing: border-box;
      background-color: rgb(24, 26, 38);
      border-radius: 16px;
      box-shadow:
        0 0px 2px 0 rgba(255, 255, 255, 0.2),
        0 4px 28px 0 rgba(0, 0, 0, 0.4);
      overflow: hidden;
    }
    .box img {
      width: 100%;
    }
/*
    div {
      display: inline-block;
      overflow: hidden;
      background-color: rgb(24, 26, 38);
      border: 1px solid rgb(35, 35, 35);
      border-radius: 16px;
      box-shadow: 0 4px 28px 0 rgba(0, 0, 0, 0.4);
    }
    p {
      padding: 0 12px;
      margin: 8px 0 20px 0;
      font-family: "DM Sans", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
      color: rgb(192, 198, 205);
      font-size: 16px;
    }
    p:before {
      content: '‚ùù';
      color: rgb(122, 126, 130);
      padding-right: 2px;
    }
*/  </style>
</head>

<body>

<script>
let data = [
  {id: '596808d3-8550-497b-bbf7-e16df6ba9a43', w: 2048, h: 1024},
  {id: '5c059f02-01ae-4606-8e81-a39df281b97b', w: 2048, h: 1024},
  {id: '90a1b52f-5e4f-4d8b-99af-3c5cd59bf434', w: 1024, h: 1024},
  {id: 'e20f7450-a289-44d5-9b83-b5a0b9fedc37', w: 2048, h: 1024},
  {id: '6b777018-edb8-4a76-be36-8a78652a3199', w: 1664, h: 2432},
  {id: '3d637738-3996-46d0-b2c3-0af14863322b', w: 1408, h: 2816},
  {id: 'a437c15a-5e3e-42b7-9299-3b1188b40020', w: 2048, h: 1024},
  {id: '60d99de5-dd01-4f3d-870d-2f957a409d91', w: 2304, h: 1536},
  {id: '81600ebb-7d32-4660-a3ec-34c6684926a9', w: 1024, h: 1024},
  {id: '932eae0c-ed04-4616-8750-e8d29d4cc78b', w: 2304, h: 1536},
  {id: 'fcb1286b-fc40-46bb-a3ce-51bed7232622', w: 1024, h: 1536},
  {id: '3dae2556-b910-4a9c-8c41-0578472b8e7f', w: 2048, h: 2048},
  {id: 'cb5f8b4c-e6dc-4bc0-827f-c330093f2827', w: 1664, h: 2432},
  {id: 'da3cc4f1-2024-40fd-83b6-36c41fa6ca66', w: 2304, h: 1536},
  {id: 'dc2ca067-e202-49d3-ac0c-b60f14ea5b3d', w: 2048, h: 1152},
  {id: '05447686-85b8-49a3-8ed7-d3ee5b0ebe0c', w: 1792, h: 1024},
  {id: '6228d5ef-c902-484a-a8b5-4cfc696bd07d', w: 1024, h: 1792},
  {id: '4bc25b4f-87e2-432b-b0ff-ed4cbab67951', w: 1536, h: 1024},
  {id: '06b16ea2-3f09-45fe-b4ab-66db853f4583', w: 2304, h: 1536},
  {id: 'f14eb017-5655-4013-8b9f-b22c3edf35d8', w: 1536, h: 2688},
  {id: '52e76a58-1d26-455f-92d9-d79f50931453', w: 2048, h: 2048},
  {id: '4408292b-2828-40cf-a81d-9a186a43e53e', w: 2304, h: 1664},
  {id: 'fbd2c6b6-eb92-4ce8-89e9-c0e040296c4c', w: 1664, h: 2432},
  {id: 'f951cb42-775f-4e54-be98-58e651e18d30', w: 1664, h: 2432},
  {id: '4f17d6e2-fd63-484b-977d-e27916d5d5d1', w: 1664, h: 2432},
  {id: 'f73be0ac-6c25-4b7a-a878-8fe13a6d69d9', w: 2048, h: 2048},
  {id: 'e3542b15-1f1c-446a-8f3b-1418760477c0', w: 2048, h: 2048},
  {id: 'ed43f1b8-88fb-43eb-b0cc-7e785ecb6b41', w: 1024, h: 1792},
  {id: 'e59e0649-140e-4c6a-aa91-4697dd402729', w: 1024, h: 1792},
  {id: '719c4930-70c3-4855-b212-8f8e14c4c3c0', w: 1024, h: 1792},
  {id: '8ea1568b-2dca-4279-96e3-2d52fd276597', w: 2048, h: 1024},
  {id: 'ad4ad020-52d1-4305-ad23-306647acc495', w: 1536, h: 1024},
  {id: '43d51329-276e-4260-8bd5-53220ff4b023', w: 1536, h: 1024},
  {id: '884ff494-0be6-44ad-96c6-a7504cbfbd50', w: 1536, h: 1024},
  {id: '3781e6d1-a1d5-42e9-b490-49c0981d2aab', w: 1792, h: 1024},
  {id: '30d2ccee-488e-47ff-b9b6-17f1997faa10', w: 2304, h: 1536},
  {id: 'dcad37ca-642e-41c4-975d-92eb50c4a2f8', w: 2304, h: 1536},
  {id: 'c3e0d7e3-cf2d-471c-ae00-94ab4813d312', w: 1664, h: 2432},
  {id: '7f740b3c-86d4-42ba-91c8-230da6ab348d', w: 1024, h: 1024},
  {id: 'a765e305-43c1-47a9-a145-63cb0ad15fea', w: 1664, h: 2432},
  {id: 'b1c0c023-658a-4a9d-aae0-885014704bbf', w: 1664, h: 2432},
  {id: '16f75d7e-4308-4f66-b910-7a6a0ca3329e', w: 1664, h: 2432},
  {id: 'c7991998-c193-47c0-bc28-96c9de7b2d4f', w: 1664, h: 2432},
  {id: 'ff2f9fd1-3bc5-469e-b2b1-054987122eda', w: 1664, h: 2432},
  {id: '0bde6126-2b0d-4e43-9d6a-99c678599ffa', w: 1664, h: 2432},
  {id: '47809a3c-92e1-4584-ae48-e0addb59a7ba', w: 1664, h: 2432},
  {id: '9d0769cc-09f3-4ca2-8614-c9a4eabb13be', w: 1664, h: 2432},
  {id: '0ae13cc6-e11f-4d8d-9521-64bfd76c8797', w: 1664, h: 2432},
  {id: '9fe01d22-c281-4f1a-bb5c-5fa22066900e', w: 1024, h: 1024},
  {id: '734f2a21-cdbc-4c54-b832-0b4206879f42', w: 1024, h: 1536},
  {id: '153a8b3e-59dc-4b92-89ab-640bf683af76', w: 1024, h: 1024},
  {id: '73e9cb44-fa63-4198-a9b3-cd4004f91654', w: 1536, h: 1024},
  {id: '6fea9fd0-a4f0-4b79-886b-ec1ecba3ee81', w: 1024, h: 1536},
  {id: 'a248d49c-749d-49f8-a114-32d809d3d496', w: 2048, h: 1024},
  {id: 'cc56ea37-74ca-4ca8-bfc1-96bfc8e5a383', w: 1024, h: 1792},
  {id: 'e08b34f6-d03d-4f1e-aa05-e6a1120e5000', w: 1024, h: 1536},
  {id: '1b843b1d-2451-42ed-a933-76817ef2b736', w: 1024, h: 1536},
  {id: '8f0e0675-ac0a-4615-b222-934de426edc7', w: 1024, h: 1024},
  {id: 'cdc70000-2af2-42c3-9db3-86fe266ebb0a', w: 1280, h: 1024},
  {id: '76faee1f-354d-4420-b6d9-39719dbb8d20', w: 1024, h: 1792},
  {id: 'e2ce8a73-ab2d-4540-9732-fc4f528c0ca8', w: 1792, h: 1024},
  {id: '2a6be313-344d-40ff-b750-ee6e044fafb8', w: 1024, h: 1536},
  {id: 'ce63122a-5285-417a-9816-b5425c0ff6a8', w: 1024, h: 1536},
  {id: '3801b82d-294c-4f3f-9c01-68290aed8c37', w: 1024, h: 2048},
  {id: '6a02df80-6058-4cd9-b583-88f0ede64551', w: 1536, h: 1024},
  {id: '6898bb0e-2f05-4a41-8bfb-4250a66d8869', w: 2304, h: 1536},
  {id: '32301d78-6ea6-43af-a095-08eb0f7575e8', w: 1536, h: 1024},
  {id: '536b3830-d144-470b-8c6e-f25f947edc8e', w: 1792, h: 1024},
  {id: 'f28fcde8-881d-4a75-b827-54f7e535ba44', w: 1792, h: 1024},
  {id: '883264da-082c-484c-9eba-ecd0553df0f9', w: 1024, h: 1024},
  {id: 'fc444028-779c-44f6-ac74-08fb62e5469a', w: 1024, h: 1280},
  {id: '515684a7-715c-48cf-b330-3595fb26e1de', w: 1792, h: 1024},
  {id: '0c2c63d0-3749-4ae5-998d-7d3338b98cb9', w: 1536, h: 2688},
  {id: '901578e9-79a1-43fc-a939-b7c04f5acc0e', w: 1536, h: 2688},
  {id: 'bd00d75a-8c11-46bd-a1c6-b43f35a13d5f', w: 2048, h: 1152},
  {id: 'fc0e3851-6c92-4181-892b-88cadcce6823', w: 1024, h: 1024},
  {id: 'e35f28a6-4dfc-4248-851b-8d60cfc6b676', w: 1792, h: 1024},
  {id: '3205212f-e5d7-44ba-a2e2-e72d44311e4f', w: 1024, h: 1024},
  {id: '9f184005-9007-4a93-ab6f-49df2a56d8b7', w: 1792, h: 1024},
  {id: '5a78f6fe-efea-485d-b0e6-b87c39a50b81', w: 1792, h: 1024},
  {id: '6f8b0f56-1b88-449c-96e2-bd91d4344cdb', w: 1792, h: 1024},
  {id: '184a98ed-291c-4c27-a711-c8be863095b6', w: 1536, h: 1024},
  {id: 'e5fc9b09-dc4e-4410-8bf8-0a03bcfa9235', w: 1024, h: 1024},
  {id: '693d46f6-0f48-4578-9bb3-8c252a931f8c', w: 1536, h: 1024},
  {id: 'a0101172-7c41-4e19-9c64-53442943eb12', w: 1024, h: 1024},
  {id: '175ba7de-87f5-4620-9589-fa3a509f9c61', w: 2048, h: 1024},
  {id: '12e9f165-9e0f-4773-8e11-54209e5c02c7', w: 1024, h: 2048},
  {id: '29bc75c5-65f2-448f-9c6c-560c9e439ed5', w: 1024, h: 2048},
  {id: '62174480-a054-4f49-a278-76b90744afd4', w: 2688, h: 1536},
  {id: 'c346fa1b-fc5f-49c8-960e-5156947e29bd', w: 1792, h: 1024},
  {id: '7a9b5e5b-7ef2-49d1-8664-a917cce1f784', w: 1792, h: 1024},
  {id: 'cfd9b144-dc17-40fe-aab7-3b7bb6d6b52a', w: 1920, h: 1280},
  {id: 'b317c31b-185f-457a-8f09-c8d088f4c9dd', w: 1792, h: 1024},
  {id: '64f077d2-ded9-4291-8116-2a7e4edd74f5', w: 1792, h: 1024},
  {id: 'e987bfc2-0a52-46b9-add6-9537518398d5', w: 1024, h: 1024},
  {id: '586f0bf8-639e-401c-8622-33d1e9736cdb', w: 1024, h: 1024},
  {id: '226e635a-d41e-41da-92b1-eac02c4196e5', w: 1024, h: 1024},
  {id: '0f3ea9a2-ad79-491c-87db-3bf7d7bb0547', w: 1024, h: 1024},
  {id: '9c0a4fea-ae34-4c07-8e77-4aa7a9d5bdc5', w: 2304, h: 1024},
  {id: '9826680f-5cd4-4548-9a39-60eb091e58f2', w: 1024, h: 1024},
  {id: 'af2a7c0a-be8f-458d-a582-6c5a0f00e406', w: 2048, h: 2048},
  {id: 'a9b5bd52-5989-42ef-b6f1-90ff75201727', w: 2304, h: 1024},
  {id: '05562c53-fe19-4ec6-a3df-8f1e3f507fc7', w: 1024, h: 1024},
  {id: '9105e83a-4bf4-4cad-a002-091b6c2e807c', w: 1024, h: 1024},
  {id: '28b40b6b-2c31-4f89-b9aa-cbeeed53f899', w: 1792, h: 1024},
  {id: '815449fd-8fc5-4991-964b-93351a0f6826', w: 2048, h: 2048},
  {id: 'cbe6dc5b-5401-441e-80f3-47b4b7cc2915', w: 1024, h: 1024},
  {id: 'ac8bdf8a-d7ff-4a97-a0ea-3f52eee22e5d', w: 896, h: 512},
  {id: '08e8ca60-e330-4a0f-b677-ccf7e5f17bc1', w: 2048, h: 2048},
  {id: '5c32d5f8-861c-493f-b98e-4fb0a4734d7a', w: 1792, h: 1024},
  {id: '554959ca-cdfc-4013-bbdf-98fac4b595e3', w: 1792, h: 1024},
  {id: 'ec0a09bd-c053-47a3-804d-5b46a960a964', w: 1280, h: 1024},
  {id: 'aba2dcec-9852-41c5-af2a-4e56d356306d', w: 2048, h: 1152},
  {id: 'cf77943e-dc69-49cb-897e-4efc9b3d4cc6', w: 1664, h: 1664},
  {id: '9c8420b0-4a42-45c9-8d87-414a89f7b304', w: 1152, h: 2048},
  {id: '49fc4fed-d20b-4706-b1fb-2f40eaa39c83', w: 1536, h: 2688},
  {id: 'b04bc443-9667-4a25-9c0d-87a6add2c9b3', w: 1664, h: 1664},
  {id: 'fb422f6e-d87a-45a7-b6e8-1b8f70f2bd61', w: 1664, h: 1664},
  {id: '88be2db6-c39f-436b-89c5-753698855fc6', w: 1024, h: 1024},
  {id: '6f359cb3-0976-4945-8cfd-f56b70ad7527', w: 1664, h: 1664},
  {id: '6154dfaf-bbf1-4bec-bf4c-d4f2825fc103', w: 2304, h: 1024},
  {id: '1890c313-dbae-4f2f-b8f6-f2c9735ff190', w: 2304, h: 1024},
  {id: '74db9b64-2af6-4499-bfea-09b76ff8eedc', w: 2304, h: 1024},
  {id: 'ea29a59f-2c0c-43d3-bcea-9c080d1b78ea', w: 1536, h: 1536},
  {id: 'e69d238a-4d71-4fe3-9f4b-5a3ac471f5b2', w: 1664, h: 1664},
  {id: '0417c327-5eac-441e-923f-9736dcd8e380', w: 1664, h: 1664},
  {id: '0740ff12-0b35-4905-8dad-bf550a84cb27', w: 1024, h: 1024},
  {id: '8aa7fd74-73ea-4831-a48a-ce9edc67d414', w: 2048, h: 1152},
  {id: '8ee2a580-a6a1-4356-81d1-40e9bc01f5e2', w: 1024, h: 1024},
  {id: 'e21ccdd0-4efe-4058-b176-d96c6c673642', w: 1408, h: 1792},
  {id: '19a138c9-8d56-471f-bc08-351fda122b5e', w: 1408, h: 1792},
  {id: '14465d26-a41e-4cc7-9a70-c7de8a0e28b3', w: 1408, h: 1792},
]

window.addEventListener('resize', scheduleRender)
window.addEventListener('scroll', scheduleRender)

let gapLeft = 16
let gapTop = 16

function colsF(innerWidth) {
  return innerWidth < 600 ? 2 : innerWidth < 900 ? 3 : 4
}

let boxes; {
  let {innerWidth, innerHeight} = window
  let cols = colsF(innerWidth)
  let maxW = (innerWidth - 0) / cols - gapLeft * 2
  let maxH = maxW - gapTop * 2

  boxes = data.map((size, i) => {
    let ar = size.w / size.h
    let w = Math.min(size.w, maxW)
    let h = Math.min(size.h, maxH)
    w = Math.min(h * ar, w)
    h = w / ar

    let node = document.createElement('div')
        node.className = 'box'
    let img = document.createElement('img')
        img.src = `https://mj-gallery.com/${size.id}/grid_0_384_N.webp`
    node.appendChild(img)

    return {
      w,
      h,
      top: innerHeight + Math.floor(i / cols) * maxH,
      left: Math.floor(i / cols) * -innerWidth - innerWidth,
      node,
    }
  })
}

let dummyPlaceholder = document.createElement('div')
document.body.appendChild(dummyPlaceholder)

// === state
let prevNodes = new Set()
let scheduled = false

function scheduleRender() {
  if (scheduled) return;
  scheduled = true

  requestAnimationFrame(function render() {
    let {innerWidth, innerHeight} = window
    let scrollTop = window.scrollY

    let scheduleNextRender = false

    let cols = colsF(innerWidth)
    let maxW = (innerWidth - 0) / cols - gapLeft * 2
    let maxH = maxW - gapTop * 2

    let rowTop = gapTop
    let newNodes = new Set()
    for (let i = 0; i < data.length; i++) {
      let size = data[i]
      let box = boxes[i]

      let ar = size.w / size.h
      let w = Math.min(size.w, maxW)
      let h = Math.min(size.h, maxH)
      w = Math.min(h * ar, w)
      h = w / ar
      let top = rowTop + (maxH - h) / 2 // center vertically
      let left = gapLeft + innerWidth / cols * (i % cols) + (maxW - w) / 2 // center horizontally

      let speed = 5
      let dW = (w - box.w) / speed
      let dH = (h - box.h) / speed
      let dTop = (top - box.top) / speed
      let dLeft = (left - box.left) / speed

      box.w += dW
      box.h += dH
      box.top += dTop
      box.left += dLeft

      if (Math.abs(dW) > 0.001 || Math.abs(dH) > 0.001 || Math.abs(dTop) > 0.001 || Math.abs(dLeft) > 0.001) {
        scheduleNextRender = true
      }

      let node = box.node
      if (box.top <= scrollTop + innerHeight && box.top + box.h >= scrollTop) { // visible range
        node.style.width = `${box.w}px`
        node.style.height = `${box.h}px`
        node.style.top = `${box.top}px`
        node.style.left = `${box.left}px`
        let img = node.children[0]
        img.style.cursor = 'zoom-in'

        newNodes.add(node)
      }

      if (i % cols === cols - 1 || i === data.length - 1) {
        rowTop += maxH + gapTop
      }
    }

    for (let node of newNodes) {
      if (!prevNodes.has(node)) document.body.appendChild(node)
    }
    for (let node of prevNodes) {
      if (!newNodes.has(node)) document.body.removeChild(node)
    }

    prevNodes = newNodes

    dummyPlaceholder.style.height = `${rowTop}px`

    // === prepare for next frame
    scheduled = false
    if (scheduleNextRender) scheduleRender()
  })
}

scheduleRender()
</script>

</body>

</html>
